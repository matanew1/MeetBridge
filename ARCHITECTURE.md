# MeetBridge App Architecture

## ðŸ“ System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MEETBRIDGE APP                               â”‚
â”‚                      (React Native + Expo)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   PRESENTATION     â”‚    â”‚   NAVIGATION       â”‚
          â”‚      LAYER         â”‚    â”‚     LAYER          â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚           STATE MANAGEMENT LAYER               â”‚
          â”‚   (Zustand Store + React Context)              â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                            â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   BUSINESS LOGIC   â”‚    â”‚    UTILITIES        â”‚
          â”‚   SERVICE LAYER    â”‚    â”‚    & HELPERS        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚            BACKEND / DATABASE                   â”‚
          â”‚        (Firebase / Firestore)                   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ—ï¸ Layered Architecture

### **Layer 1: Presentation Layer (UI Components)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      APP ENTRY POINT                        â”‚
â”‚                      app/_layout.tsx                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            â”‚            â”‚                â”‚            â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚  Auth  â”‚  â”‚  Tabs  â”‚  â”‚   Chat   â”‚  â”‚ Connections â”‚ â”‚Settingsâ”‚
â”‚ Screensâ”‚  â”‚ Layout â”‚  â”‚  Detail  â”‚  â”‚   Detail    â”‚ â”‚ Screen â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚           â”‚            â”‚                â”‚            â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚         TAB SCREENS (4 Main Tabs)             â”‚   â”‚
    â”‚  â”‚                                                â”‚   â”‚
    â””â”€â”€â”¤  â€¢ Loved Tab (loved.tsx)                      â”‚â”€â”€â”€â”˜
       â”‚  â€¢ Search Tab (search.tsx)                    â”‚
       â”‚  â€¢ Chat Tab (chat.tsx)                        â”‚
       â”‚  â€¢ Connections Tab (connections.tsx)          â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚          REUSABLE COMPONENTS                   â”‚
       â”‚                                                â”‚
       â”‚  â€¢ ProfileCard                                 â”‚
       â”‚  â€¢ ProfileDetail                               â”‚
       â”‚  â€¢ ProfileModal                                â”‚
       â”‚  â€¢ MatchModal                                  â”‚
       â”‚  â€¢ FilterModal                                 â”‚
       â”‚  â€¢ EnhancedMatchAnimation                      â”‚
       â”‚  â€¢ DiscoveryAnimation                          â”‚
       â”‚  â€¢ GlobalToast                                 â”‚
       â”‚  â€¢ EditProfileModal                            â”‚
       â”‚  â€¢ AvatarUpload                                â”‚
       â”‚  â€¢ InterestTagPicker                           â”‚
       â”‚  â€¢ IcebreakerSuggestions                       â”‚
       â”‚  â€¢ UI Kit: Button, Card, Input, Badge, etc.    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Layer 2: Navigation Layer**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             EXPO ROUTER (FILE-BASED)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  /                        â†’ Root Layout              â”‚
â”‚  /auth/                   â†’ Auth Stack               â”‚
â”‚    â”œâ”€ login               â†’ Login Screen             â”‚
â”‚    â”œâ”€ register            â†’ Register Screen          â”‚
â”‚    â”œâ”€ forgot-password     â†’ Forgot Password          â”‚
â”‚    â””â”€ complete-profile    â†’ Profile Completion       â”‚
â”‚                                                       â”‚
â”‚  /(tabs)/                 â†’ Main App (Tab Layout)    â”‚
â”‚    â”œâ”€ loved               â†’ Discover/Liked Tab       â”‚
â”‚    â”œâ”€ search              â†’ Search Tab               â”‚
â”‚    â”œâ”€ chat                â†’ Chat List Tab            â”‚
â”‚    â””â”€ connections         â†’ Board Tab                â”‚
â”‚                                                       â”‚
â”‚  /chat/[id]               â†’ Chat Detail Screen       â”‚
â”‚  /connections/comments/   â†’ Comments Screen          â”‚
â”‚  /settings/               â†’ Settings Screen          â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Layer 3: State Management Layer**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STATE MANAGEMENT                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         ZUSTAND STORE (store/userStore.ts)           â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  State:                                               â”‚  â”‚
â”‚  â”‚  â€¢ currentUser: User | null                          â”‚  â”‚
â”‚  â”‚  â€¢ discoverProfiles: User[]                          â”‚  â”‚
â”‚  â”‚  â€¢ likedProfiles: string[]                           â”‚  â”‚
â”‚  â”‚  â€¢ matchedProfiles: string[]                         â”‚  â”‚
â”‚  â”‚  â€¢ conversations: Conversation[]                     â”‚  â”‚
â”‚  â”‚  â€¢ searchFilters: SearchFilters                      â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Actions:                                             â”‚  â”‚
â”‚  â”‚  â€¢ loadCurrentUser()                                 â”‚  â”‚
â”‚  â”‚  â€¢ loadDiscoverProfiles()                            â”‚  â”‚
â”‚  â”‚  â€¢ likeProfile()                                     â”‚  â”‚
â”‚  â”‚  â€¢ dislikeProfile()                                  â”‚  â”‚
â”‚  â”‚  â€¢ unmatchProfile()                                  â”‚  â”‚
â”‚  â”‚  â€¢ loadConversations()                               â”‚  â”‚
â”‚  â”‚  â€¢ createConversation()                              â”‚  â”‚
â”‚  â”‚  â€¢ sendMessage()                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      REACT CONTEXT (contexts/)                        â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  AuthContext:                                         â”‚  â”‚
â”‚  â”‚  â€¢ user: User | null                                 â”‚  â”‚
â”‚  â”‚  â€¢ isAuthenticated: boolean                          â”‚  â”‚
â”‚  â”‚  â€¢ login(), register(), logout()                     â”‚  â”‚
â”‚  â”‚  â€¢ updateProfile()                                   â”‚  â”‚
â”‚  â”‚  â€¢ deleteAccount()                                   â”‚  â”‚
â”‚  â”‚  â€¢ changePassword()                                  â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ThemeContext:                                        â”‚  â”‚
â”‚  â”‚  â€¢ isDarkMode: boolean                               â”‚  â”‚
â”‚  â”‚  â€¢ toggleDarkMode()                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Layer 4: Business Logic / Service Layer**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVICE LAYER (services/)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         FIREBASE SERVICES (firebase/)                 â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  FirebaseAuthService                                  â”‚  â”‚
â”‚  â”‚  â€¢ login(email, password)                            â”‚  â”‚
â”‚  â”‚  â€¢ register(userData)                                â”‚  â”‚
â”‚  â”‚  â€¢ logout()                                          â”‚  â”‚
â”‚  â”‚  â€¢ resetPassword()                                   â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  FirebaseUserProfileService                           â”‚  â”‚
â”‚  â”‚  â€¢ getUserProfile(userId)                            â”‚  â”‚
â”‚  â”‚  â€¢ updateUserProfile(userId, data)                   â”‚  â”‚
â”‚  â”‚  â€¢ uploadProfileImage(file)                          â”‚  â”‚
â”‚  â”‚  â€¢ deleteUserProfile(userId)                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  FirebaseDiscoveryService                             â”‚  â”‚
â”‚  â”‚  â€¢ discoverProfiles(filters)                         â”‚  â”‚
â”‚  â”‚  â€¢ getProfilesByLocation(lat, lng, radius)          â”‚  â”‚
â”‚  â”‚  â€¢ filterByPreferences(profiles, preferences)       â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  FirebaseMatchingService                              â”‚  â”‚
â”‚  â”‚  â€¢ likeProfile(userId, targetId)                     â”‚  â”‚
â”‚  â”‚  â€¢ checkForMatch(userId, targetId)                   â”‚  â”‚
â”‚  â”‚  â€¢ createMatch(user1Id, user2Id)                     â”‚  â”‚
â”‚  â”‚  â€¢ unmatchProfile(userId, matchId)                   â”‚  â”‚
â”‚  â”‚  â€¢ getMatches(userId)                                â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  FirebaseChatService                                  â”‚  â”‚
â”‚  â”‚  â€¢ getConversations(userId)                          â”‚  â”‚
â”‚  â”‚  â€¢ createConversation(participants)                  â”‚  â”‚
â”‚  â”‚  â€¢ sendMessage(conversationId, message)             â”‚  â”‚
â”‚  â”‚  â€¢ markAsRead(conversationId, messageIds)           â”‚  â”‚
â”‚  â”‚  â€¢ subscribeToMessages(conversationId)              â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  MissedConnectionsService                             â”‚  â”‚
â”‚  â”‚  â€¢ createConnection(data)                            â”‚  â”‚
â”‚  â”‚  â€¢ getConnections(filters)                           â”‚  â”‚
â”‚  â”‚  â€¢ toggleLike(connectionId, userId)                  â”‚  â”‚
â”‚  â”‚  â€¢ addComment(connectionId, comment)                 â”‚  â”‚
â”‚  â”‚  â€¢ claimConnection(connectionId)                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         UTILITY SERVICES                              â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Location Services (location/)                        â”‚  â”‚
â”‚  â”‚  â€¢ smartLocationManager                              â”‚  â”‚
â”‚  â”‚  â€¢ geohashService                                    â”‚  â”‚
â”‚  â”‚  â€¢ privacyService                                    â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  presenceService                                      â”‚  â”‚
â”‚  â”‚  â€¢ setOnline(userId)                                 â”‚  â”‚
â”‚  â”‚  â€¢ setOffline(userId)                                â”‚  â”‚
â”‚  â”‚  â€¢ subscribeToPresence(userId)                       â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  notificationService                                  â”‚  â”‚
â”‚  â”‚  â€¢ sendMatchNotification(userName, matchId)          â”‚  â”‚
â”‚  â”‚  â€¢ sendMessageNotification(sender, message)          â”‚  â”‚
â”‚  â”‚  â€¢ requestPermissions()                              â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  cacheService                                         â”‚  â”‚
â”‚  â”‚  â€¢ get(key)                                          â”‚  â”‚
â”‚  â”‚  â€¢ set(key, value, ttl)                              â”‚  â”‚
â”‚  â”‚  â€¢ invalidate(pattern)                               â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  toastService                                         â”‚  â”‚
â”‚  â”‚  â€¢ success(title, message)                           â”‚  â”‚
â”‚  â”‚  â€¢ error(title, message)                             â”‚  â”‚
â”‚  â”‚  â€¢ warning(title, message)                           â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  icebreakerService                                    â”‚  â”‚
â”‚  â”‚  â€¢ getRandomIcebreaker()                             â”‚  â”‚
â”‚  â”‚  â€¢ getIcebreakersByCategory(category)               â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  cleanupService                                       â”‚  â”‚
â”‚  â”‚  â€¢ cleanupOrphanedData()                             â”‚  â”‚
â”‚  â”‚  â€¢ cleanupOldConversations()                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  secureStorageService                                 â”‚  â”‚
â”‚  â”‚  â€¢ saveSecure(key, value)                            â”‚  â”‚
â”‚  â”‚  â€¢ getSecure(key)                                    â”‚  â”‚
â”‚  â”‚  â€¢ deleteSecure(key)                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Layer 5: Utilities & Helpers**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UTILITIES (utils/)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â€¢ responsive.ts          â†’ Screen size & scaling utils    â”‚
â”‚  â€¢ dateUtils.ts           â†’ Date formatting & parsing      â”‚
â”‚  â€¢ errorHandler.ts        â†’ Global error handling          â”‚
â”‚  â€¢ inputSanitizer.ts      â†’ Input validation & sanitation  â”‚
â”‚  â€¢ responsiveStyles.ts    â†’ Responsive style helpers       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONSTANTS (constants/)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â€¢ index.ts               â†’ App config & constants         â”‚
â”‚  â€¢ interests.ts           â†’ Predefined interest categories â”‚
â”‚  â€¢ theme.ts               â†’ Light/Dark theme definitions   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HOOKS (hooks/)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â€¢ useFrameworkReady.ts   â†’ App initialization hook        â”‚
â”‚  â€¢ usePresence.ts         â†’ Online/offline status hook     â”‚
â”‚  â€¢ useResponsive.ts       â†’ Responsive layout hook         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Layer 6: Backend / Database (Firebase)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FIREBASE BACKEND                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              FIRESTORE COLLECTIONS                    â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  users/                                               â”‚  â”‚
â”‚  â”‚  â”œâ”€ {userId}                                          â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ id, name, email, age, gender                 â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ bio, interests[], images[]                   â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ location: { lat, lng, geohash }             â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ preferences: { ageRange, maxDistance, ... } â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ isOnline, lastSeen                           â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ createdAt, updatedAt                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  likes/                                               â”‚  â”‚
â”‚  â”‚  â”œâ”€ like_{userId}_{targetId}                         â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ userId                                        â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ targetId                                      â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ createdAt                                     â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ isMatch: boolean                             â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  matches/                                             â”‚  â”‚
â”‚  â”‚  â”œâ”€ match_{user1Id}_{user2Id}                        â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ user1, user2                                  â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ createdAt                                     â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ conversationId                                â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ unmatched: boolean                           â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ animationPlayed: boolean                     â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  conversations/                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ conv_{user1Id}_{user2Id}                         â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ participants: [user1Id, user2Id]            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ createdAt, updatedAt                         â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ lastMessage: { text, senderId, createdAt }  â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ unreadCount: { [userId]: number }           â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ messages/ (subcollection)                    â”‚  â”‚
â”‚  â”‚  â”‚       â”œâ”€ {messageId}                              â”‚  â”‚
â”‚  â”‚  â”‚       â”‚   â”œâ”€ text                                  â”‚  â”‚
â”‚  â”‚  â”‚       â”‚   â”œâ”€ senderId                              â”‚  â”‚
â”‚  â”‚  â”‚       â”‚   â”œâ”€ createdAt                             â”‚  â”‚
â”‚  â”‚  â”‚       â”‚   â””â”€ read: boolean                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  missedConnections/                                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ {connectionId}                                    â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ userId, userName, userImage                  â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ location: { lat, lng, landmark, category }  â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ description, tags[]                          â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ timeOccurred, createdAt                      â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ isAnonymous, isEdited                        â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ likes, views, comments                       â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ likedBy[], savedBy[]                         â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ claims[] (users who claimed)                 â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ comments/ (subcollection)                    â”‚  â”‚
â”‚  â”‚  â”‚       â”œâ”€ {commentId}                              â”‚  â”‚
â”‚  â”‚  â”‚       â”‚   â”œâ”€ userId, userName, userImage          â”‚  â”‚
â”‚  â”‚  â”‚       â”‚   â”œâ”€ text, createdAt                      â”‚  â”‚
â”‚  â”‚  â”‚       â”‚   â””â”€ likes, likedBy[]                     â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  presence/                                            â”‚  â”‚
â”‚  â”‚  â”œâ”€ {userId}                                          â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ isOnline: boolean                            â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ lastSeen: timestamp                          â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ updatedAt: timestamp                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              FIREBASE STORAGE                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  profileImages/                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ {userId}/                                         â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ profile.jpg (main image)                     â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ image1.jpg                                   â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ image2.jpg                                   â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ ...                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          FIREBASE AUTHENTICATION                      â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  â€¢ Email/Password Authentication                      â”‚  â”‚
â”‚  â”‚  â€¢ Session Management                                 â”‚  â”‚
â”‚  â”‚  â€¢ Password Reset                                     â”‚  â”‚
â”‚  â”‚  â€¢ Account Deletion                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            FIREBASE SECURITY RULES                    â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  â€¢ firestore.rules    â†’ Database security            â”‚  â”‚
â”‚  â”‚  â€¢ storage.rules      â†’ File upload security         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ Data Flow Architecture

### **Example: Liking a Profile (Complete Flow)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INTERACTION                              â”‚
â”‚         User taps "Like" button on profile card                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PRESENTATION LAYER                              â”‚
â”‚  Search Tab (search.tsx)                                         â”‚
â”‚  â€¢ handleLike(profileId) called                                  â”‚
â”‚  â€¢ Add to animatingOutCards (UI feedback)                        â”‚
â”‚  â€¢ Animation starts (200ms delay)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STATE MANAGEMENT                                â”‚
â”‚  Zustand Store (userStore.ts)                                    â”‚
â”‚  â€¢ likeProfile(profileId) action called                          â”‚
â”‚  â€¢ Update local state optimistically:                            â”‚
â”‚    - Add profileId to likedProfiles[]                            â”‚
â”‚    - Remove from discoverProfiles[]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SERVICE LAYER                                  â”‚
â”‚  FirebaseMatchingService.likeProfile()                           â”‚
â”‚  1. Create like document in Firestore                            â”‚
â”‚  2. Check if target user already liked current user              â”‚
â”‚  3. If YES â†’ Create match + conversation                         â”‚
â”‚  4. If NO â†’ Just store the like                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FIREBASE BACKEND                             â”‚
â”‚  Firestore Operations:                                           â”‚
â”‚                                                                  â”‚
â”‚  1. Create: likes/like_{currentUserId}_{targetId}               â”‚
â”‚     { userId, targetId, createdAt, isMatch: false }             â”‚
â”‚                                                                  â”‚
â”‚  2. Check: likes/like_{targetId}_{currentUserId} exists?        â”‚
â”‚                                                                  â”‚
â”‚  3. IF MATCH:                                                    â”‚
â”‚     a. Create: matches/match_{user1Id}_{user2Id}                â”‚
â”‚        { user1, user2, createdAt, conversationId, ... }         â”‚
â”‚                                                                  â”‚
â”‚     b. Create: conversations/conv_{user1Id}_{user2Id}           â”‚
â”‚        { participants: [user1, user2], createdAt, ... }         â”‚
â”‚                                                                  â”‚
â”‚     c. Update both like documents: isMatch = true               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  RESPONSE & SIDE EFFECTS                         â”‚
â”‚                                                                  â”‚
â”‚  IF NOT A MATCH:                                                 â”‚
â”‚  â€¢ Return { isMatch: false }                                     â”‚
â”‚  â€¢ Store updates likedProfiles                                   â”‚
â”‚  â€¢ Animation completes                                           â”‚
â”‚  â€¢ Profile removed from grid                                     â”‚
â”‚                                                                  â”‚
â”‚  IF IT'S A MATCH:                                                â”‚
â”‚  â€¢ Return {                                                      â”‚
â”‚      isMatch: true,                                              â”‚
â”‚      matchId: "match_xxx",                                       â”‚
â”‚      matchedUser: User object,                                   â”‚
â”‚      conversationId: "conv_xxx"                                  â”‚
â”‚    }                                                             â”‚
â”‚                                                                  â”‚
â”‚  â€¢ Store updates:                                                â”‚
â”‚    - Add to matchedProfiles[]                                    â”‚
â”‚    - Add to matchedProfilesData[]                                â”‚
â”‚    - Add conversation to conversations[]                         â”‚
â”‚                                                                  â”‚
â”‚  â€¢ Show EnhancedMatchAnimation                                   â”‚
â”‚  â€¢ Send notification to matched user                             â”‚
â”‚  â€¢ Reload conversations                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               REAL-TIME LISTENERS (Other User)                   â”‚
â”‚                                                                  â”‚
â”‚  Target User's Device:                                           â”‚
â”‚  â€¢ Real-time match listener detects new match                    â”‚
â”‚  â€¢ onSnapshot() fires for matches collection                     â”‚
â”‚  â€¢ Fetches matched user data from Firestore                      â”‚
â”‚  â€¢ Updates their matchedProfiles state                           â”‚
â”‚  â€¢ Shows EnhancedMatchAnimation on their screen                  â”‚
â”‚  â€¢ Sends local notification                                      â”‚
â”‚  â€¢ Conversation appears in their chat tab                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     APP LAUNCH                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AuthContext Initialization                      â”‚
â”‚  â€¢ onAuthStateChanged listener starts                            â”‚
â”‚  â€¢ Checks Firebase Auth for active session                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚  User Found    â”‚      â”‚  No User    â”‚
        â”‚  (Logged In)   â”‚      â”‚  (Guest)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚                       â”‚
                â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Load User Profile â”‚   â”‚  Navigate to         â”‚
    â”‚ from Firestore    â”‚   â”‚  /auth/login         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Check Profile Completion         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€ Complete â†’ Navigate to /(tabs)/
            â”‚
            â””â”€ Incomplete â†’ Navigate to /auth/complete-profile
```

### **Login Flow**

```
User enters credentials
        â”‚
        â–¼
AuthContext.login(email, password)
        â”‚
        â–¼
FirebaseAuthService.login()
        â”‚
        â–¼
Firebase signInWithEmailAndPassword()
        â”‚
        â”œâ”€ Success
        â”‚   â”‚
        â”‚   â–¼
        â”‚   Fetch user profile from Firestore
        â”‚   â”‚
        â”‚   â–¼
        â”‚   Set currentUser in store
        â”‚   â”‚
        â”‚   â–¼
        â”‚   Initialize:
        â”‚   â€¢ Presence service (set online)
        â”‚   â€¢ Notification service
        â”‚   â€¢ Location tracking
        â”‚   â”‚
        â”‚   â–¼
        â”‚   Navigate to /(tabs)/
        â”‚
        â””â”€ Error
            â”‚
            â–¼
            Show error toast
            Return { success: false, message }
```

---

## ðŸŒ Location & Discovery Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LOCATION ARCHITECTURE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  smartLocationManager                                            â”‚
â”‚  â”œâ”€ getCurrentLocation()                                         â”‚
â”‚  â”‚   â”œâ”€ Check permissions                                        â”‚
â”‚  â”‚   â”œâ”€ Get device location (expo-location)                     â”‚
â”‚  â”‚   â”œâ”€ Apply privacy radius (blur exact location)              â”‚
â”‚  â”‚   â””â”€ Return { lat, lng, accuracy }                           â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ updateUserLocation(userId, location)                         â”‚
â”‚  â”‚   â”œâ”€ Calculate geohash (precision 7-9)                       â”‚
â”‚  â”‚   â”œâ”€ Update Firestore: users/{userId}                        â”‚
â”‚  â”‚   â”‚   â””â”€ location: { lat, lng, geohash, updatedAt }          â”‚
â”‚  â”‚   â””â”€ Return success                                           â”‚
â”‚  â”‚                                                               â”‚
â”‚  â””â”€ startLocationTracking()                                      â”‚
â”‚      â”œâ”€ Watch position changes                                   â”‚
â”‚      â”œâ”€ Debounce updates (5 minutes)                            â”‚
â”‚      â””â”€ Update when significant change (500m+)                   â”‚
â”‚                                                                  â”‚
â”‚  geohashService                                                  â”‚
â”‚  â”œâ”€ encode(lat, lng, precision)                                  â”‚
â”‚  â”œâ”€ decode(geohash)                                              â”‚
â”‚  â”œâ”€ neighbors(geohash)                                           â”‚
â”‚  â””â”€ getRadius(geohash)                                           â”‚
â”‚                                                                  â”‚
â”‚  privacyService                                                  â”‚
â”‚  â”œâ”€ blurLocation(lat, lng, radius)                              â”‚
â”‚  â”œâ”€ shouldShowExactLocation(userId, targetId)                    â”‚
â”‚  â””â”€ getPrivacySettings(userId)                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DISCOVERY QUERY FLOW                            â”‚
â”‚                                                                  â”‚
â”‚  User opens Search Tab                                           â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  loadDiscoverProfiles() called                                   â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  FirebaseDiscoveryService.discoverProfiles(filters)              â”‚
â”‚         â”‚                                                        â”‚
â”‚         â”œâ”€ Get current user location                            â”‚
â”‚         â”œâ”€ Calculate geohash range (based on maxDistance)       â”‚
â”‚         â”œâ”€ Generate neighbor geohashes                          â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Firestore Query:                                                â”‚
â”‚  users collection                                                â”‚
â”‚    .where('location.geohash', 'in', [geohashes])                â”‚
â”‚    .where('gender', '==', preferences.interestedIn)             â”‚
â”‚    .where('age', '>=', preferences.ageRange[0])                 â”‚
â”‚    .where('age', '<=', preferences.ageRange[1])                 â”‚
â”‚    .limit(50)                                                    â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Filter results client-side:                                     â”‚
â”‚    â€¢ Calculate exact distance (haversine formula)               â”‚
â”‚    â€¢ Filter by maxDistance                                       â”‚
â”‚    â€¢ Exclude liked/disliked/matched profiles                    â”‚
â”‚    â€¢ Sort by distance (closest first)                           â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Return filtered & sorted profiles                               â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Store updates discoverProfiles[]                                â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  UI renders grid of profile cards                                â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ’¬ Real-Time Chat Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHAT ARCHITECTURE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  1. CONVERSATION CREATION (When Match Occurs)              â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Match detected in likeProfile()                           â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  FirebaseMatchingService.createMatch()                     â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â”œâ”€ Create match document                           â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â”œâ”€ Generate conversationId                         â”‚ â”‚
â”‚  â”‚         â”‚   "conv_{user1Id}_{user2Id}"                     â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â””â”€ Create conversation document:                   â”‚ â”‚
â”‚  â”‚             {                                               â”‚ â”‚
â”‚  â”‚               id: conversationId,                           â”‚ â”‚
â”‚  â”‚               participants: [user1Id, user2Id],            â”‚ â”‚
â”‚  â”‚               createdAt: serverTimestamp(),                â”‚ â”‚
â”‚  â”‚               updatedAt: serverTimestamp(),                â”‚ â”‚
â”‚  â”‚               lastMessage: null,                           â”‚ â”‚
â”‚  â”‚               unreadCount: { [user1Id]: 0, [user2Id]: 0 } â”‚ â”‚
â”‚  â”‚             }                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  2. REAL-TIME CONVERSATION LISTENER                        â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Chat Tab (chat.tsx) - useEffect                           â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  onSnapshot(                                                â”‚ â”‚
â”‚  â”‚    query(                                                   â”‚ â”‚
â”‚  â”‚      collection(db, 'conversations'),                      â”‚ â”‚
â”‚  â”‚      where('participants', 'array-contains', currentUserId),â”‚ â”‚
â”‚  â”‚      orderBy('updatedAt', 'desc')                          â”‚ â”‚
â”‚  â”‚    )                                                        â”‚ â”‚
â”‚  â”‚  )                                                          â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  Listener fires on:                                         â”‚ â”‚
â”‚  â”‚    â€¢ New conversation created                              â”‚ â”‚
â”‚  â”‚    â€¢ Message sent/received                                 â”‚ â”‚
â”‚  â”‚    â€¢ Conversation updated                                  â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  Update store.conversations[]                              â”‚ â”‚
â”‚  â”‚  Update UI (chat list)                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  3. SENDING A MESSAGE                                      â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  User types message & taps send                            â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  sendMessage(conversationId, text)                         â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  FirebaseChatService.sendMessage()                         â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â”œâ”€ Create message document:                        â”‚ â”‚
â”‚  â”‚         â”‚   conversations/{conversationId}/messages/       â”‚ â”‚
â”‚  â”‚         â”‚   {                                               â”‚ â”‚
â”‚  â”‚         â”‚     text: "Hello!",                              â”‚ â”‚
â”‚  â”‚         â”‚     senderId: currentUserId,                     â”‚ â”‚
â”‚  â”‚         â”‚     createdAt: serverTimestamp(),                â”‚ â”‚
â”‚  â”‚         â”‚     read: false                                  â”‚ â”‚
â”‚  â”‚         â”‚   }                                               â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â””â”€ Update conversation document:                   â”‚ â”‚
â”‚  â”‚             {                                               â”‚ â”‚
â”‚  â”‚               lastMessage: {                               â”‚ â”‚
â”‚  â”‚                 text: "Hello!",                            â”‚ â”‚
â”‚  â”‚                 senderId: currentUserId,                   â”‚ â”‚
â”‚  â”‚                 createdAt: timestamp                       â”‚ â”‚
â”‚  â”‚               },                                            â”‚ â”‚
â”‚  â”‚               updatedAt: serverTimestamp(),                â”‚ â”‚
â”‚  â”‚               unreadCount: {                               â”‚ â”‚
â”‚  â”‚                 [recipientId]: increment(1)                â”‚ â”‚
â”‚  â”‚               }                                             â”‚ â”‚
â”‚  â”‚             }                                               â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  Send notification to recipient                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  4. MESSAGE LISTENER (Chat Detail Screen)                 â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  User opens chat with someone                              â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  Navigate to /chat/[conversationId]                        â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  onSnapshot(                                                â”‚ â”‚
â”‚  â”‚    query(                                                   â”‚ â”‚
â”‚  â”‚      collection(db, 'conversations/{id}/messages'),        â”‚ â”‚
â”‚  â”‚      orderBy('createdAt', 'asc')                           â”‚ â”‚
â”‚  â”‚    )                                                        â”‚ â”‚
â”‚  â”‚  )                                                          â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  Real-time updates:                                         â”‚ â”‚
â”‚  â”‚    â€¢ New message appears instantly                         â”‚ â”‚
â”‚  â”‚    â€¢ Typing indicators                                     â”‚ â”‚
â”‚  â”‚    â€¢ Read receipts                                         â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  Mark messages as read:                                     â”‚ â”‚
â”‚  â”‚    markMessagesAsRead(conversationId, messageIds)          â”‚ â”‚
â”‚  â”‚         â”‚                                                   â”‚ â”‚
â”‚  â”‚         â–¼                                                   â”‚ â”‚
â”‚  â”‚  Update unreadCount in conversation                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”” Notification System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 NOTIFICATION ARCHITECTURE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  notificationService                                             â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ requestPermissions()                                         â”‚
â”‚  â”‚   â”œâ”€ Request from OS                                         â”‚
â”‚  â”‚   â””â”€ Store permission status                                 â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ sendMatchNotification(userName, matchId)                    â”‚
â”‚  â”‚   â”œâ”€ Local Notification:                                     â”‚
â”‚  â”‚   â”‚   Title: "It's a Match! ðŸŽ‰"                              â”‚
â”‚  â”‚   â”‚   Body: "You and {userName} liked each other"           â”‚
â”‚  â”‚   â”‚   Data: { matchId, type: 'match' }                      â”‚
â”‚  â”‚   â””â”€ Schedule immediately                                    â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ sendMessageNotification(sender, message)                    â”‚
â”‚  â”‚   â”œâ”€ Local Notification:                                     â”‚
â”‚  â”‚   â”‚   Title: "{sender.name}"                                â”‚
â”‚  â”‚   â”‚   Body: "{message.text}"                                â”‚
â”‚  â”‚   â”‚   Data: { conversationId, type: 'message' }             â”‚
â”‚  â”‚   â””â”€ Only if app is in background                           â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ broadcastMatchNotification(userId, userName, matchId)       â”‚
â”‚  â”‚   â”œâ”€ Send to OTHER user's device                            â”‚
â”‚  â”‚   â””â”€ Via Firebase Cloud Messaging (future)                  â”‚
â”‚  â”‚                                                               â”‚
â”‚  â””â”€ handleNotificationResponse(response)                         â”‚
â”‚      â”œâ”€ Match notification â†’ Navigate to match modal            â”‚
â”‚      â”œâ”€ Message notification â†’ Navigate to chat                 â”‚
â”‚      â””â”€ Other â†’ Handle accordingly                              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¨ Theme System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      THEME ARCHITECTURE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ThemeContext (contexts/ThemeContext.tsx)                        â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ State:                                                       â”‚
â”‚  â”‚   â€¢ isDarkMode: boolean                                      â”‚
â”‚  â”‚   â€¢ Persisted in AsyncStorage                                â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ Actions:                                                     â”‚
â”‚  â”‚   â€¢ toggleDarkMode()                                         â”‚
â”‚  â”‚   â€¢ setDarkMode(boolean)                                     â”‚
â”‚  â”‚                                                               â”‚
â”‚  â””â”€ Theme Objects:                                               â”‚
â”‚      â”œâ”€ lightTheme                                               â”‚
â”‚      â”‚   â€¢ background: '#FFFFFF'                                â”‚
â”‚      â”‚   â€¢ text: '#000000'                                      â”‚
â”‚      â”‚   â€¢ primary: '#7C3AED'                                   â”‚
â”‚      â”‚   â€¢ ...                                                   â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€ darkTheme                                                â”‚
â”‚          â€¢ background: '#1A1A2E'                                 â”‚
â”‚          â€¢ text: '#FFFFFF'                                       â”‚
â”‚          â€¢ primary: '#9D5CFF'                                    â”‚
â”‚          â€¢ ...                                                   â”‚
â”‚                                                                  â”‚
â”‚  Usage in Components:                                            â”‚
â”‚  const { isDarkMode } = useTheme();                              â”‚
â”‚  const theme = isDarkMode ? darkTheme : lightTheme;              â”‚
â”‚  <View style={{ backgroundColor: theme.background }} />          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“± Responsive Design System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  RESPONSIVE UTILITIES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  utils/responsive.ts                                             â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ Scaling Functions:                                           â”‚
â”‚  â”‚   â€¢ scale(size)           â†’ Horizontal scaling               â”‚
â”‚  â”‚   â€¢ verticalScale(size)   â†’ Vertical scaling                 â”‚
â”‚  â”‚   â€¢ moderateScale(size)   â†’ Moderate scaling                 â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ Device Detection:                                            â”‚
â”‚  â”‚   â€¢ isTablet              â†’ iPad, large tablets              â”‚
â”‚  â”‚   â€¢ isSmallDevice         â†’ iPhone SE, small phones          â”‚
â”‚  â”‚   â€¢ SCREEN_WIDTH          â†’ Window width                     â”‚
â”‚  â”‚   â€¢ SCREEN_HEIGHT         â†’ Window height                    â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ Layout Helpers:                                              â”‚
â”‚  â”‚   â€¢ getNumColumns(itemWidth) â†’ Grid columns                  â”‚
â”‚  â”‚   â€¢ spacing: { xs, sm, md, lg, xl, xxl }                    â”‚
â”‚  â”‚   â€¢ borderRadius: { sm, md, lg, xl, xxl }                   â”‚
â”‚  â”‚                                                               â”‚
â”‚  â””â”€ Breakpoints:                                                 â”‚
â”‚      â€¢ Small: < 375px                                            â”‚
â”‚      â€¢ Medium: 375px - 768px                                     â”‚
â”‚      â€¢ Large (Tablet): > 768px                                   â”‚
â”‚                                                                  â”‚
â”‚  Example Usage:                                                  â”‚
â”‚  const iconSize = isTablet ? scale(26) : scale(20);              â”‚
â”‚  paddingHorizontal: spacing.md                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”’ Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SECURITY LAYERS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. AUTHENTICATION                                               â”‚
â”‚     â€¢ Firebase Auth (email/password)                             â”‚
â”‚     â€¢ Session tokens (automatic refresh)                         â”‚
â”‚     â€¢ Secure token storage (expo-secure-store)                   â”‚
â”‚                                                                  â”‚
â”‚  2. AUTHORIZATION (Firestore Rules)                              â”‚
â”‚     â€¢ User can only read/write own profile                       â”‚
â”‚     â€¢ Messages: Only participants can access                     â”‚
â”‚     â€¢ Matches: Only matched users can see                        â”‚
â”‚     â€¢ Presence: Public read, owner write                         â”‚
â”‚                                                                  â”‚
â”‚  3. DATA VALIDATION                                              â”‚
â”‚     â€¢ Input sanitization (inputSanitizer.ts)                     â”‚
â”‚     â€¢ XSS protection                                             â”‚
â”‚     â€¢ Email validation                                           â”‚
â”‚     â€¢ Password strength requirements                             â”‚
â”‚                                                                  â”‚
â”‚  4. PRIVACY                                                      â”‚
â”‚     â€¢ Location blurring (privacy radius)                         â”‚
â”‚     â€¢ Anonymous posting option                                   â”‚
â”‚     â€¢ Profile visibility controls                                â”‚
â”‚     â€¢ Block/report functionality                                 â”‚
â”‚                                                                  â”‚
â”‚  5. SECURE STORAGE                                               â”‚
â”‚     â€¢ Sensitive data: expo-secure-store                          â”‚
â”‚     â€¢ Non-sensitive: AsyncStorage                                â”‚
â”‚     â€¢ Auto-routing in secureStorageService                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Performance Optimizations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                PERFORMANCE STRATEGIES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. CACHING                                                      â”‚
â”‚     â€¢ In-memory cache (cacheService)                             â”‚
â”‚     â€¢ TTL-based expiration                                       â”‚
â”‚     â€¢ Cache invalidation on mutations                            â”‚
â”‚     â€¢ Prefetching next batch of profiles                         â”‚
â”‚                                                                  â”‚
â”‚  2. OPTIMISTIC UPDATES                                           â”‚
â”‚     â€¢ Immediate UI feedback                                      â”‚
â”‚     â€¢ Rollback on error                                          â”‚
â”‚     â€¢ Used in: likes, messages, comments                         â”‚
â”‚                                                                  â”‚
â”‚  3. LIST VIRTUALIZATION                                          â”‚
â”‚     â€¢ FlatList with optimized props:                             â”‚
â”‚       - removeClippedSubviews                                    â”‚
â”‚       - maxToRenderPerBatch: 5-8                                 â”‚
â”‚       - windowSize: 3-5                                          â”‚
â”‚       - initialNumToRender: 6-8                                  â”‚
â”‚       - getItemLayout (fixed heights)                            â”‚
â”‚                                                                  â”‚
â”‚  4. MEMOIZATION                                                  â”‚
â”‚     â€¢ React.memo for components                                  â”‚
â”‚     â€¢ useMemo for computed values                                â”‚
â”‚     â€¢ useCallback for functions                                  â”‚
â”‚     â€¢ Custom comparison functions                                â”‚
â”‚                                                                  â”‚
â”‚  5. IMAGE OPTIMIZATION                                           â”‚
â”‚     â€¢ Image prefetching (first 3 items)                          â”‚
â”‚     â€¢ Lazy loading                                               â”‚
â”‚     â€¢ Thumbnail generation (future)                              â”‚
â”‚     â€¢ CDN delivery (Firebase Storage)                            â”‚
â”‚                                                                  â”‚
â”‚  6. ANIMATIONS                                                   â”‚
â”‚     â€¢ Native driver: true                                        â”‚
â”‚     â€¢ Reduced durations (200ms)                                  â”‚
â”‚     â€¢ Reanimated for complex animations                          â”‚
â”‚     â€¢ Haptic feedback for interactions                           â”‚
â”‚                                                                  â”‚
â”‚  7. DATABASE QUERIES                                             â”‚
â”‚     â€¢ Indexed fields (geohash, age, gender)                      â”‚
â”‚     â€¢ Composite indexes for complex queries                      â”‚
â”‚     â€¢ Pagination (limit + cursor)                                â”‚
â”‚     â€¢ Geohash-based location queries                             â”‚
â”‚                                                                  â”‚
â”‚  8. DEBOUNCING & THROTTLING                                      â”‚
â”‚     â€¢ Filter changes: 500ms debounce                             â”‚
â”‚     â€¢ Location updates: 5 min debounce                           â”‚
â”‚     â€¢ Scroll events: throttled to 16ms                           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š State Flow Diagram

```
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚         APP INITIALIZATION              â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚ AuthContext â”‚         â”‚ ThemeContextâ”‚
         â”‚ Initialize  â”‚         â”‚ Initialize  â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚                       â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  UserStore   â”‚
                    â”‚  Initialize  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
     â”‚ Load User   â”‚ â”‚ Load    â”‚ â”‚ Load        â”‚
     â”‚ Profile     â”‚ â”‚ Matches â”‚ â”‚ Conversationsâ”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚              â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Start Real- â”‚
                    â”‚  Time        â”‚
                    â”‚  Listeners   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
     â”‚ Presence    â”‚ â”‚ Matches â”‚ â”‚ Messages    â”‚
     â”‚ Listener    â”‚ â”‚ Listenerâ”‚ â”‚ Listener    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEPLOYMENT STACK                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  FRONTEND (React Native + Expo)                                  â”‚
â”‚  â”œâ”€ Development: Expo Go app                                     â”‚
â”‚  â”œâ”€ Build: EAS Build                                             â”‚
â”‚  â”œâ”€ iOS: App Store                                               â”‚
â”‚  â””â”€ Android: Google Play Store                                   â”‚
â”‚                                                                  â”‚
â”‚  BACKEND (Firebase)                                              â”‚
â”‚  â”œâ”€ Authentication: Firebase Auth                                â”‚
â”‚  â”œâ”€ Database: Cloud Firestore                                    â”‚
â”‚  â”œâ”€ Storage: Firebase Storage                                    â”‚
â”‚  â”œâ”€ Hosting: Firebase Hosting (web version)                      â”‚
â”‚  â””â”€ Functions: Cloud Functions (future)                          â”‚
â”‚                                                                  â”‚
â”‚  CI/CD                                                           â”‚
â”‚  â”œâ”€ Version Control: Git                                         â”‚
â”‚  â”œâ”€ Repository: GitHub                                           â”‚
â”‚  â”œâ”€ Build: EAS Build                                             â”‚
â”‚  â””â”€ Deploy: Firebase CLI                                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“ Summary

**MeetBridge** is a modern dating app built with:

- **Frontend**: React Native + Expo (TypeScript)
- **State Management**: Zustand + React Context
- **Backend**: Firebase (Auth, Firestore, Storage)
- **Navigation**: Expo Router (file-based)
- **Real-time**: Firestore listeners
- **Location**: Geohash-based discovery
- **UI**: Custom components + animations
- **Performance**: Optimized lists, caching, memoization
- **Security**: Firebase rules, input validation, secure storage

The architecture follows **layered design principles** with clear separation of concerns, making it maintainable, scalable, and performant.
